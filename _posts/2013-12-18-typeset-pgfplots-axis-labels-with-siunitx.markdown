---
layout: post
title: Typeset pgfplots axis ticks with siunitx
date: 2013-12-18 18:26:36 +0100
comments: true
categories: latex
---

The siunitx package is often used to typeset numbers in LaTeX, and wouldn't it also be lovely to typeset the _x_ and _y_ labels of a pgfplots graph using the same style to keep things consistent? Seek no farther! There's no need to attempt to set the same configurations of siunitx and pgfplots in order to have everything synced. Here is a MWE I put together:

{% highlight latex %}
\documentclass{article}
\usepackage{pgfplots, siunitx}
\pgfplotsset{compat=1.9}

% tell siunitx not to
% display deicmals
\sisetup{
  round-mode = places,
  round-precision = 0,
}

\begin{document}

\begin{tikzpicture}
  \begin{axis}[
      xlabel = $x$,
      ylabel = $y$,
      domain = 0:100,
      legend pos = north west,
      scaled y ticks = false,
      yticklabel = \pgfmathparse{\tick*1}\num{\pgfmathresult},
      xticklabel = \pgfmathparse{\tick*1}\SI{\pgfmathresult}{\percent},
    ]
    \addplot[mark = none, red]{x^2};
    \legend{$x^2$}
  \end{axis}
\end{tikzpicture}

\end{document}
{% endhighlight %}

Which results in a plot that has siunitx's number formatting on the _x_-axis and percentages on the _y_-axis. It uses the same number formatting used everywhere else in the document, as shown here:

![Plot generated by pgfplots of above code]({{ site.post_image_path }}/pgfplots-siunitx.png)

Lines 21 and 22 here do the magic by passing pgfplots label ticks to siunitx's formatting macros for you to format them with any options you've already configured siunitx.


Kinda sorta stolen from [this][1] SO question.

[1]: http://tex.stackexchange.com/questions/37900/pgfplot-consistent-number-format
